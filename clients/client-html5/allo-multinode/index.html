<html>
  <head>
    <title>Allo Multinode</title>
    <meta content="">
    <style></style>
    
    <script type="text/javascript" src="MultiNode.js"></script>
    
    <script type="text/javascript">

        function URLFacile()
        {
            this.parametres = new Array();
            
            var parametresUrl = window.location.search.replace("?","").split("&");
            for(position in parametresUrl)
            {
            
                cleValeur = parametresUrl[position].split("=");
                this.parametres[cleValeur[0]] = cleValeur[1];
            }
            this.get = function(cle)
            {
                return this.parametres[cle];
            }
        }
   
        var url = new URLFacile();
        var pseudonyme = url.get('pseudo');
        console.log("pseudonyme = " + pseudonyme);
    
        function attendre(time) {
            return new Promise((resolve) => setTimeout(resolve, time));
        }
        
        var serveurJeu = new MultiNode();
        serveurJeu.recevoirVariable = function(variable)
        {
            console.log("Surcharge de recevoirVariable " + variable.cle + " = " + variable.valeur);
        }
        serveurJeu.apprendreConnexion = function(pseudonyme)
        {
            console.log("Nouvel ami " + pseudonyme);
        }
    
        attendre(500).then(() => {
            serveurJeu.demanderAuthentification(pseudonyme);
            serveurJeu.posterVariableTextuelle("argent", "million");
        }); 
        
    
    </script>
    
  </head>
  <body>
    <h1>Allo Multinode</h1>
  </body>
</html>
